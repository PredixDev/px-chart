<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8/>
    <title>px-timeseries sandbox</title>

    <!-- Styles -->
    <link href="/bower_components/iids/dist/iidx/css/iids.min.css" rel="stylesheet" type="text/css"/>
    <link href="/bower_components/iids/dist/iidx/css/responsive.min.css" rel="stylesheet" type="text/css"/>

    <!-- RequireJS -->
    <script src="/bower_components/requirejs/require.js"></script>
    <script src="/requirejs.config.js"></script>

    <script id="example-js">

        var app;

        require(['angular', 'widgets-module', 'src/main'], function (angular, widgetModule) {
            app = angular.module('demoApp', ['demoModule']);

            app.controller('MainCtrl', ['$scope', function ($scope) {
                var timeSeriesData = [
                    {
                        "sample_size": 14368,
                        "results": [
                            {
                                "name": "abc_123",
                                "group_by": [
                                    {
                                        "name": "type",
                                        "type": "number"
                                    },
                                    {
                                        "name": "tag",
                                        "tags": [
                                            "host"
                                        ],
                                        "group": {
                                            "host": "server1"
                                        }
                                    }
                                ],
                                "tags": {
                                    "host": [
                                        "server1"
                                    ],
                                    "customer": [
                                        "bar"
                                    ]
                                },
                                "values": [
                                    [
                                        25833600000,
                                        0
                                    ],
                                    [
                                        27043200000,
                                        0.6
                                    ],
                                    [
                                        27734400000,
                                        0.7
                                    ],
                                    [
                                        28944000000,
                                        0.8
                                    ],
                                    [
                                        29548800000,
                                        0.6
                                    ]
                                ]
                            }
                        ]
                    }
                ];
                $scope.timeSeries = {
                    // Required:
                    title: 'Time Series Chart',
                    queries: timeSeriesData,
                    showYAxisUnits: true,
                    plotType: 'line',
                    // Optional:
                    xAxisLabel: 'Time',
                    yAxisLabel: 'Pressure',
                    maxNumPoints: 3,
                    subtitle: 'Historical Pressure'
                };
            }]);

            angular.element(document).ready(function () {
                angular.bootstrap(document, [app.name]);
                console.log('RequireJS bootstrapped ', app.name);
            });
        });
    </script>
</head>
<body class="container content">
<section class="module" id="example-html" data-ng-controller="MainCtrl">
    <header class="module-header">
        <h3 class="voice voice-brand pull-left">px-timeseries</h3>
    </header>
    <div class="module-body">
        <px-timeseries
                title="timeSeries.title"
                subtitle="timeSeries.subtitle"
                show-y-axis-units="timeSeries.showYAxisUnits"
                plot-type="timeSeries.plotType"
                queries="timeSeries.queries"
                data-x-axis-label="timeSeries.xAxisLabel"
                data-y-axis-label="timeSeries.yAxisLabel"
                max-num-points="timeSeries.maxNumPoints">
        </px-timeseries>
    </div>
</section>
</body>
</html>
